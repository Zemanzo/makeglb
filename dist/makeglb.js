module.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([function(e,t){e.exports=require("util")},function(e,t,n){"use strict";n.r(t);var r=n(0);const o={"image/png":["png"],"image/jpeg":["jpg","jpeg"],"text/plain":["glsl","vert","vs","frag","fs","txt"],"image/vnd-ms.dds":["dds"]},i=(e,t)=>{let n=0;if(e>0){const r=e%t;n=e+(0===r?0:t-r)}return n},s=async(e,t)=>{let n=0;const r={},s=(e=>{const t=[];return e.buffers.forEach(e=>{const{uri:n}=e;t.push({type:"buffer",uri:n})}),e.images&&e.images.forEach(e=>{const{uri:n}=e;t.push({type:"image",uri:n})}),t})(e),f=await(async(e,t)=>{const n=e.map(e=>{const{uri:n}=e;return new Promise(async e=>{if(t){const r=n.split("/"),o=r[r.length-1].toLowerCase();e(t[o])}else{const t=await fetch(n);e(await t.arrayBuffer())}})});return new Promise(t=>{Promise.all(n).then(n=>{const r=e.map((e,t)=>{const{type:r}=e;return{index:t,type:r,data:n[t]}});t(r)})})})(s,t);return e.buffers.map((e,t)=>{delete e.uri,e.byteLength=f[t].data.byteLength,r[t]=n,n+=i(f[t].data.byteLength,4)}),e.images&&e.images.map((t,s)=>{const u=e.buffers.length+s;r[u]=n;const a={buffer:0,byteOffset:n,byteLength:f[u].data.byteLength};n+=i(f[u].data.byteLength,4);const c=e.bufferViews.length;e.bufferViews.push(a),t.bufferView=c,t.mimeType=(e=>{const t=Object.keys(o);for(let n=0;n<t.length;++n){const r=t[n];for(let t=0;t<o[r].length;++t){const n=o[r][t];if(e.toLowerCase().indexOf(n)>0)return r}}return"application/octet-stream"})(t.uri),delete t.uri}),{bufferMap:r,bufferSize:n,buffers:f}},f=async(e,t)=>{const n=JSON.parse(JSON.stringify(e)),{bufferMap:o,bufferSize:f,buffers:u}=await s(n,t);n.buffers=[{byteLength:f}];const a=(new r.TextEncoder).encode(JSON.stringify(n)),c=i(a.length,4),l=c-a.length,p=20+c+8+f,b=new ArrayBuffer(p),g=new DataView(b);let d=0;g.setUint32(d,1179937895,!0),d+=4,g.setUint32(d,2,!0),d+=4,g.setUint32(d,p,!0),d+=4,g.setUint32(d,c,!0),d+=4,g.setUint32(d,1313821514,!0),d+=4;for(let e=0;e<a.length;++e)g.setUint8(d,a[e]),d+=1;for(let e=0;e<l;++e)g.setUint8(d,32),d+=1;g.setUint32(d,f,!0),d+=4,g.setUint32(d,5130562,!0),d+=4;for(let e=0;e<u.length;++e){const t=d+o[e],n=new Uint8Array(u[e].data);for(let r=0;r<u[e].data.byteLength;++r)g.setUint8(t+r,n[r])}return b},u=e=>new Blob([e],{type:"model/json-binary"});n.d(t,"GLBfromGLTF",function(){return f}),n.d(t,"BLOBfromGLB",function(){return u})}]);